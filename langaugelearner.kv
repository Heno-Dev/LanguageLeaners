#:kivy 2.0.0

<GameScreen>:
    
    canvas: 
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: root.x, root.y
            size: root.width, root.height
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: root.x + 4, root.y + 4
            size: root.width - 8, root.height - 8
    
    FloatLayout:
        pos: 0, 0
        size: root.width, root.height

        Label:
            pos_hint: {'x': .1, 'y': .86}
            size_hint: .8, .1
            text_size: self.size
            text: self.parent.parent.correct_answer_text
            font_size: 40
            bold: True
            color: 0, 0, 0, 1
        
        GridLayout: 
            pos_hint: {'x': .1, 'y': .25}
            size_hint: None, None
            size: root.width * .8, root.width * .8
            cols: 2

            ImageBox:
                image_name: self.get_image_path(self.parent.parent.parent.display_image_names[0])
                index: 0 
            ImageBox:
                image_name: self.get_image_path(self.parent.parent.parent.display_image_names[1])
                index: 1
            ImageBox:
                image_name: self.get_image_path(self.parent.parent.parent.display_image_names[2])
                index: 2
            ImageBox:
                image_name: self.get_image_path(self.parent.parent.parent.display_image_names[3])
                index: 3
        
        ProgressBar: 
            pos_hint: {'x': .1, 'y': .1}
            size_hint: .8, .1

<ImageBox>:
    canvas: 
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.x, self.y
            size: self.width, self.height
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.x + 4, self.y + 4
            size: self.width - 8, self.height - 8
    Button:
        pos: root.x + 10, root.y + 10
        size: root.width * .9, root.height * .9
        background_normal: str(False)
        on_press: self.parent.parent.parent.parent.make_selection(self.parent.index)

    Image:
        source: self.parent.image_name
        pos: root.x + 15, root.y + 15
        size: root.width * .8, root.height * .8

<ProgressBar>:
    canvas:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle: 
            pos: self.x, self.y
            size: self.width , self.height
        Color:
            rgba: 1, 1, 1, 1
        Rectangle: 
            pos: self.x + 5, self.y + 5
            size: self.width - 10, self.height - 10
        Color:
            rgba: 0, 0.5, 0.2, 1
        Rectangle: 
            pos: self.x + 4, self.y + 4
            size: self.parent.parent.bar_width, self.height - 8
        Color:
            rgba: 1, 1, 1, 1
        BorderImage:
            pos: self.width - 10, self.y + 10
            size: self.height -15, self.height - 15
            source: 'images/trophy.png'

<EndGameScreen>:
    canvas:
        Color:
            rgba: 0,0,0,1
        Rectangle:
            pos: self.x, self.y
            size: self.width, self.height
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.x +5, self.y +5 
            size: self.width -10, self.height -10 
    FloatLayout:
        Label:
            pos_hint:{'x': .1, 'y': .8}
            size_hint: .8, .1
            color: 0,0,0,1
            bold: True
            text_size: self.size
            halign: 'left'
            font_size: 40
            text: "Time's up!"

        Label:
            pos_hint:{'x': .1, 'y': .55}
            size_hint: .8, .1
            color: 0,0,0,1
            bold: True
            text_size: self.size
            halign: 'left'
            font_size: 30
            text: "Your Score: " + str(self.parent.parent.final_score)

        Label:
            pos_hint:{'x': .1, 'y': .4}
            size_hint: .8, .1
            color: 0,0,0,1
            bold: True
            text_size: self.size
            halign: 'left'
            font_size: 30
            text: "High Score: " + str(self.parent.parent.high_score)

        Button: 
            pos_hint:{'x': .1, 'y': .1}
            size_hint: .8, .15
            text: "Play Again?"
            on_press: self.parent.parent.dismiss()

    